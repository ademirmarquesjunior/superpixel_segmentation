# Fracture segmentation assisted with superpixels


**Paper: Interactive fracture segmentation based on optimum connectivity between superpixels**

*Authors: Ademir Marques Junior, Alexandre Falcao, Graciela Racolte, Eniuce Menezes de Souza, Leonardo Bacchi, Caroline Lessio Cazarin, Luiz Gonzaga Jr, Mauricio Roberto Veronez

Abstract: Oil and gas reservoirs are well studied in petroleum engineering, using seismic data to estimate fluid flow and well placement. However, seismic data cannot capture fractures due to their scale, and fractures may affect rock porosity and permeability. Consequently, rock fracture segmentation and quantification from aerial images of analogous outcrops can input essential information into those studies. This paper presents a new method, named interactive Forest Growing (iFG), for fracture segmentation. The image is initially segmented into superpixels, defining a superpixel graph. The user selects seed superpixels, a path-cost threshold, and fractures are delineated by growing one optimum-path tree from each seed with path costs limited to the selected threshold. iFG considerably increases efficiency while reducing human effort in fracture segmentation compared to pixel-by-pixel manual annotation. We evaluate iFG with three specialists and against an interactive Region Growing (iRG) method using 15 images to measure bias in user interpretations, verify efficiency gain over a similar approach, and generate a dataset with consolidated annotation for future work. The experiments show that iFG reduces user interventions from 19% to 33% compared to iRG, users with more experience in fracture analysis complete segmentation 4-5 times faster, and segmentation effectiveness is independent of user experience since the average F1 scores between users uing both methods ranged from 0.966 to 0.979, allowing us to create a consolidated segmentation.

Work spresented in the SIBIGRAPI 2022 - 35th Conference on Graphics, Patterns and Images

A. Marques Junior et al., "Interactive Fracture Segmentation Based on Optimum Connectivity Between Superpixels," in IEEE Geoscience and Remote Sensing Letters, vol. 19, pp. 1-5, 2022, Art no. 3008105, doi: 10.1109/LGRS.2022.3200311.


# Table of Contents

- [Installation](#installation)
- [Usage](#usage)
- [License](#license)
- [Credits](#credits)
- [How to cite](#how-to-cite)


## Installation

This Python script requires a Python 3 environment and the following installed libraries as seen in the file requirements.txt.

- [PyQt5](https://keras.io/)
- [Numpy](https://numpy.org/)
- [Pillow]()
- [Numba](https://pypi.org/project/sewar/)
- [OpenCV](https://pypi.org/project/opencv-python/)
- [Pillow]()


For installation download and unpack the content of this repository in a folder acessible by your working Python 3 environment.


## Usage

Run the script "main.py" in a Python 3 environments with the required libraries installed to open the main window.

<img src="https://github.com/ademirmarquesjunior/superpixel_segmentation/blob/main/docs/screen.png" width="500" alt="Neural network learning process">

The menu item "Files" will open option to open the image to be segmented, to open the superpixel image, and to save the segmented mask.

<img src="https://github.com/ademirmarquesjunior/superpixel_segmentation/blob/main/docs/open_files.png" width="150" alt="Neural network learning process">

The file examples below are in the "/Dataset/Images + Superpixel/" folder use examples, where the tiff images have to be openned first followed to the "superpixel" file generated by the [Iterative Spanning Forest superpixel algorithm](https://www.ic.unicamp.br/~afalcao/downloads.html) .

<img src="https://github.com/ademirmarquesjunior/superpixel_segmentation/blob/main/docs/files.png" width="150" alt="Neural network learning process">

Conducted experiments with three geologists and the consolidated dataset generated in the paper above are in the "/Dataset/" folder.



## Credits	
This work is credited to the [Vizlab | X-Reality and GeoInformatics Lab](http://vizlab.unisinos.br/) and the following developers:	[Ademir Marques Junior](https://www.researchgate.net/profile/Ademir_Junior) and Alexandre Falcão (Unicamp).

## License

    MIT Licence (https://mit-license.org/)

## How to cite

If you find our work useful in your research please consider citing one of our papers:

```bash
@ARTICLE{9862998,
  author={Marques Junior, Ademir and Falcão, Alexandre Xavier and Racolte, Graciela and Menezes, Eniuce and Bachi, Leonardo and Cazarin, Caroline Lessio and Gonzaga, Luiz and Veronez, Mauricio Roberto},
  journal={IEEE Geoscience and Remote Sensing Letters}, 
  title={Interactive Fracture Segmentation Based on Optimum Connectivity Between Superpixels}, 
  year={2022},
  volume={19},
  number={},
  pages={1-5},
  doi={10.1109/LGRS.2022.3200311}}
```

